<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="sg">
<select id="getSCnt" parameterType="hashmap" resultType="Integer">
	SELECT COUNT(*) AS CNT
	FROM NOTICE
	WHERE 1=1
	<if test="searchTxt != null and searchTxt != ''">
	<choose>
		<when test="searchGbn == 0">
		AND ITEM_NAME LIKE '%' || #{searchTxt} || '%'
		</when>
		<when test="searchGbn == 1">
		AND TITLE LIKE '%' || #{searchTxt} || '%'
		</when>
		<when test="searchGbn == 2">
		AND CONTENT LIKE '%' || #{searchTxt} || '%'
		</when>
		<when test="searchGbn == 3">
		AND USER_NO LIKE '%' || #{searchTxt} || '%'
		</when>
	</choose>
</if>
</select>


<select id ="getSList" parameterType="hashmap" resultType="hashmap">
SELECT S.TXT_NO, S.TITLE, S.S_DT, S.USER_NO
FROM(SELECT TXT_NO, TITLE, TO_CHAR(WRITE_DATE, 'YYYY/MM/DD') AS S_DT,
        USER_NO, ROW_NUMBER() OVER(ORDER BY TXT_NO DESC) AS RNUM
FROM NOTICE
WHERE 1=1
<if test="searchTxt != null and searchTxt != ''"> 
	<choose>
		<when test="searchGbn == 0">
		AND ITEM_NAME LIKE '%' || #{searchTxt} || '%'
		</when>
		<when test="searchGbn == 1">
		AND TITLE LIKE '%' || #{searchTxt} || '%'
		</when>
		<when test="searchGbn == 2">
		AND CONTENT LIKE '%' || #{searchTxt} || '%'
		</when>
		<when test="searchGbn == 3">
		AND USER_NO LIKE '%' || #{searchTxt} || '%'
		</when>
	</choose>
</if>
)S
WHERE S.RNUM BETWEEN #{startCnt} AND #{endCnt}
</select>




</mapper>