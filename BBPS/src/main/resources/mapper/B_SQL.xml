<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="B"><!-- namespace: 클래스명과동일 -->
	
	<!-- 본사로그인 -->
	<select id="getHQ" parameterType="hashmap" resultType="hashmap">
		SELECT USER_NO,AUTH_NO,DEP_NO,ID,PW
		FROM HQ_USER
		WHERE ID = #{hId}
		AND PW = #{hPw}
	</select>
	
	<!-- 지점,포스로그인 -->
	<select id="getB" parameterType="hashmap" resultType="hashmap">
		SELECT BRCH_NO,ID,BRCH_NAME
		FROM BRCH
		WHERE ID = #{bId}
		AND PW = #{bPw}
	</select>
	
	
	<!-- 본사메뉴 -->
	<select id="getHMenu" parameterType="hashmap" resultType="hashmap">
		SELECT DISTINCT SM.SITE_MENU_NO,TOP_SITE_MENU_NO,SM.SITE_MENU_NAME,
		SM.ARR_SEQ,SM.DEPTH,SMA.AUTH_CODE,H.USER_NO,SM.SUB_MENU_FLAG AS sub
		FROM SITE_MENU SM INNER JOIN SITE_MENU_AUTH SMA
                          ON SM.SITE_MENU_NO = SMA.SITE_MENU_NO
                         AND SM.SITE_MENU_NO BETWEEN 1 AND 13
                         AND SMA.AUTH_CODE IN (1,2)
                  INNER JOIN HQ_USER H
                          ON H.AUTH_NO = SMA.AUTH_NO
        WHERE H.USER_NO = #{hUserNo}
		START WITH SM.DEPTH = #{hDt}
		CONNECT BY PRIOR SM.SITE_MENU_NO =SM.TOP_SITE_MENU_NO 
		ORDER BY SM.ARR_SEQ ASC
	</select>
	
	
</mapper> 
