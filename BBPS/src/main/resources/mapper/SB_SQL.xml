<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="sb"><!-- namespace: 클래스명과동일 -->
	
	<!-- 품목리스트 행 개수 -->
	<select id ="getPCnt" parameterType="hashmap" resultType="Integer">
	SELECT COUNT(*)
	FROM ITEM I INNER JOIN ITEM_PRICE IP
     ON I.ITEM_NO = IP.ITEM_NO
	</select>
	
	<!-- 품목리스트 -->
	<select id ="getPList" parameterType="hashmap" resultType="hashmap">
	SELECT ITEM_NO,ITEM_NAME,PRICE,MIN_ORD_UNIT
	FROM(
		SELECT I.ITEM_NO,I.ITEM_NAME,IP.PRICE,I.MIN_ORD_UNIT,ROW_NUMBER() OVER(ORDER BY I.ITEM_NO DESC) AS RNK
		FROM ITEM I INNER JOIN ITEM_PRICE IP
    	 ON I.ITEM_NO = IP.ITEM_NO)A 
	WHERE A.RNK BETWEEN  #{startCnt} AND #{endCnt}
	</select>
	
</mapper> 
